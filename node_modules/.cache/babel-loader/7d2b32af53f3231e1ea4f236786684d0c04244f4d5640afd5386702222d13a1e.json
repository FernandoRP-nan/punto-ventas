{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nanrroti\\\\Otros Documentos\\\\GitHub\\\\Trabajo\\\\punto-venta\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Inventory from \"./components/Inventory\";\nimport Sales from \"./components/Sales\";\nimport Logs from \"./components/Logs\";\nimport jwt_decode from \"jwt-decode\"; // Importar jwt-decode\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [user, setUser] = useState(null);\n\n  // Al cargar el componente, verificar si ya hay un token almacenado\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      try {\n        const decoded = jwt_decode(token); // Decodificar el token\n        setUser({\n          role: decoded.role\n        }); // Extraer y guardar el rol del token\n      } catch (error) {\n        console.error(\"Error al decodificar el token\", error);\n      }\n    }\n  }, []);\n  const handleLogin = userData => {\n    // Al hacer login, almacenar el token en localStorage\n    localStorage.setItem(\"token\", userData.token);\n    const decoded = jwt_decode(userData.token); // Decodificar el token\n    setUser({\n      role: decoded.role\n    });\n  };\n  const handleLogout = () => {\n    // Limpiar el token de localStorage y el estado\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !user ? /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Bienvenido, \", user.role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this), user.role === \"GERENTE\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Gesti\\xF3n de Inventario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Inventory, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this), user.role === \"CAJERO\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ventas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Sales, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Logs, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Cerrar sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Login","Inventory","Sales","Logs","jwt_decode","jsxDEV","_jsxDEV","App","_s","user","setUser","token","localStorage","getItem","decoded","role","error","console","handleLogin","userData","setItem","handleLogout","removeItem","children","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/Nanrroti/Otros Documentos/GitHub/Trabajo/punto-venta/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Inventory from \"./components/Inventory\";\nimport Sales from \"./components/Sales\";\nimport Logs from \"./components/Logs\";\nimport jwt_decode from \"jwt-decode\"; // Importar jwt-decode\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n\n  // Al cargar el componente, verificar si ya hay un token almacenado\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      try {\n        const decoded = jwt_decode(token); // Decodificar el token\n        setUser({ role: decoded.role }); // Extraer y guardar el rol del token\n      } catch (error) {\n        console.error(\"Error al decodificar el token\", error);\n      }\n    }\n  }, []);\n\n  const handleLogin = (userData) => {\n    // Al hacer login, almacenar el token en localStorage\n    localStorage.setItem(\"token\", userData.token);\n    const decoded = jwt_decode(userData.token); // Decodificar el token\n    setUser({ role: decoded.role });\n  };\n\n  const handleLogout = () => {\n    // Limpiar el token de localStorage y el estado\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n\n  return (\n    <div>\n      {!user ? (\n        <Login onLogin={handleLogin} />\n      ) : (\n        <div>\n          <h1>Bienvenido, {user.role}</h1>\n          {user.role === \"GERENTE\" && (\n            <div>\n              <h2>Gestión de Inventario</h2>\n              <Inventory />\n            </div>\n          )}\n          {user.role === \"CAJERO\" && (\n            <div>\n              <h2>Ventas</h2>\n              <Sales />\n            </div>\n          )}\n          <Logs />\n          <button onClick={handleLogout}>Cerrar sesión</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}