{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nanrroti\\\\Otros Documentos\\\\GitHub\\\\Trabajo\\\\punto-venta\\\\frontend\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Inventory from \"./components/Inventory\";\nimport Sales from \"./components/Sales\";\nimport Logs from \"./components/Logs\";\nimport jwt_decode from \"jwt-decode\"; // Importar jwt-decode\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n\n  // Al cargar el componente, verificar si ya hay un token almacenado\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      try {\n        const decoded = jwt_decode(token); // Decodificar el token\n        setUser({\n          role: decoded.role\n        }); // Extraer y guardar el rol del token\n      } catch (error) {\n        console.error(\"Error al decodificar el token\", error);\n      }\n    }\n  }, []);\n  const handleLogin = userData => {\n    // Al hacer login, almacenar el token en localStorage\n    localStorage.setItem(\"token\", userData.token);\n    const decoded = jwt_decode(userData.token); // Decodificar el token\n    setUser({\n      role: decoded.role\n    });\n  };\n  const handleLogout = () => {\n    // Limpiar el token de localStorage y el estado\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, !user ? /*#__PURE__*/React.createElement(Login, {\n    onLogin: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, \"Bienvenido, \", user.role), user.role === \"GERENTE\" && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, \"Gesti\\xF3n de Inventario\"), /*#__PURE__*/React.createElement(Inventory, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  })), user.role === \"CAJERO\" && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }, \"Ventas\"), /*#__PURE__*/React.createElement(Sales, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Logs, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"Cerrar sesi\\xF3n\")));\n};\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","Login","Inventory","Sales","Logs","jwt_decode","App","user","setUser","token","localStorage","getItem","decoded","role","error","console","handleLogin","userData","setItem","handleLogout","removeItem","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onClick"],"sources":["D:/Nanrroti/Otros Documentos/GitHub/Trabajo/punto-venta/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Inventory from \"./components/Inventory\";\nimport Sales from \"./components/Sales\";\nimport Logs from \"./components/Logs\";\nimport jwt_decode from \"jwt-decode\"; // Importar jwt-decode\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n\n  // Al cargar el componente, verificar si ya hay un token almacenado\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      try {\n        const decoded = jwt_decode(token); // Decodificar el token\n        setUser({ role: decoded.role }); // Extraer y guardar el rol del token\n      } catch (error) {\n        console.error(\"Error al decodificar el token\", error);\n      }\n    }\n  }, []);\n\n  const handleLogin = (userData) => {\n    // Al hacer login, almacenar el token en localStorage\n    localStorage.setItem(\"token\", userData.token);\n    const decoded = jwt_decode(userData.token); // Decodificar el token\n    setUser({ role: decoded.role });\n  };\n\n  const handleLogout = () => {\n    // Limpiar el token de localStorage y el estado\n    localStorage.removeItem(\"token\");\n    setUser(null);\n  };\n\n  return (\n    <div>\n      {!user ? (\n        <Login onLogin={handleLogin} />\n      ) : (\n        <div>\n          <h1>Bienvenido, {user.role}</h1>\n          {user.role === \"GERENTE\" && (\n            <div>\n              <h2>Gestión de Inventario</h2>\n              <Inventory />\n            </div>\n          )}\n          {user.role === \"CAJERO\" && (\n            <div>\n              <h2>Ventas</h2>\n              <Sales />\n            </div>\n          )}\n          <Logs />\n          <button onClick={handleLogout}>Cerrar sesión</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}